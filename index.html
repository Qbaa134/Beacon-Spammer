<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Converter</title>
</head>
<body>
    <h1>Unit Converter</h1>
    
    <label for="category">Choose a category:</label>
    <select id="category" onchange="updateUnits()">
        <option value="length">Length</option>
        <option value="mass">Mass</option>
        <option value="temperature">Temperature</option>
        <option value="time">Time</option>
        <option value="speed">Speed</option>
        <option value="volume">Volume</option>
        <option value="area">Area</option>
        <option value="pressure">Pressure</option>
        <option value="storage">Storage</option>
    </select>

    <div id="conversion">
        <!-- The conversion interface will be generated dynamically here -->
    </div>

    <script>
        const categories = {
            length: {
                units: ["meters", "centimeters", "millimeters", "kilometers", "decimeters"],
                symbol: ["m", "cm", "mm", "km", "dm"]
            },
            mass: {
                units: ["grams", "kilograms", "tons", "dekagrams"],
                symbol: ["g", "kg", "t", "dg"]
            },
            temperature: {
                units: ["Celsius", "Fahrenheit", "Kelvin"],
                symbol: ["°C", "°F", "K"]
            },
            time: {
                units: ["seconds", "minutes", "hours", "days"],
                symbol: ["s", "min", "h", "d"]
            },
            speed: {
                units: ["meters per second", "kilometers per hour", "miles per hour"],
                symbol: ["m/s", "km/h", "mph"]
            },
            volume: {
                units: ["liters", "milliliters", "cubic meters", "cubic centimeters"],
                symbol: ["L", "mL", "m³", "cm³"]
            },
            area: {
                units: ["square meters", "square kilometers", "square centimeters", "hectares", "acres"],
                symbol: ["m²", "km²", "cm²", "ha", "ac"]
            },
            pressure: {
                units: ["pascals", "kilopascals", "bars", "atmospheres", "millimeters of mercury", "pounds per square inch"],
                symbol: ["Pa", "kPa", "bar", "atm", "mmHg", "psi"]
            },
            storage: {
                units: ["bits", "bytes", "kilobytes", "megabytes", "gigabytes", "terabytes"],
                symbol: ["b", "B", "KB", "MB", "GB", "TB"]
            }
        };

        function updateUnits() {
            const category = document.getElementById("category").value;
            const units = categories[category].units;
            const symbols = categories[category].symbol;
            let html = `
                <label for="fromUnit">From:</label>
                <select id="fromUnit">
                    ${units.map((unit, index) => `<option value="${unit}">${unit} (${symbols[index]})</option>`).join('')}
                </select>
                
                <label for="toUnit">To:</label>
                <select id="toUnit">
                    ${units.map((unit, index) => `<option value="${unit}">${unit} (${symbols[index]})</option>`).join('')}
                </select>

                <label for="value">Value:</label>
                <input type="number" id="value" placeholder="Enter value" oninput="convert()">
                
                <p id="result"></p>
            `;
            document.getElementById("conversion").innerHTML = html;
        }

        async function convert() {
            const value = document.getElementById("value").value;
            const fromUnit = document.getElementById("fromUnit").value;
            const toUnit = document.getElementById("toUnit").value;

            if (!value) return;

            // Call the public API for conversion (no key needed)
            const apiUrl = `https://api.convert-units.com/convert?value=${value}&from=${fromUnit}&to=${toUnit}`;
            
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                
                // Ensure the response contains a result
                if (data.result !== undefined) {
                    document.getElementById("result").textContent = `Result: ${data.result}`;
                } else {
                    document.getElementById("result").textContent = "Error: Invalid conversion.";
                }
            } catch (error) {
                document.getElementById("result").textContent = "Error in conversion.";
            }
        }

        updateUnits(); // Initial category setup
    </script>
</body>
</html>
